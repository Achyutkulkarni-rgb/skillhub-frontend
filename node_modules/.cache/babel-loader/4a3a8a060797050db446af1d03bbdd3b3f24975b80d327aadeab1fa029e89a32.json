{"ast":null,"code":"import React,{useState}from\"react\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AuthPage(_ref){let{setUser,setToken}=_ref;const[isRegister,setIsRegister]=useState(false);const[name,setName]=useState(\"\");const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const[message,setMessage]=useState(\"\");const[error,setError]=useState(\"\");const handleRegister=async e=>{e.preventDefault();if(!name||!email||!password){setError(\"All fields are required\");return;}try{// ✅ Corrected register endpoint\nconst res=await axios.post(\"https://skillhub-backend-m6he.onrender.com/api/auth/register\",{name,email,password});setMessage(res.data.message);setError(\"\");// Auto-login after registration\nconst loginRes=await axios.post(\"https://skillhub-backend-m6he.onrender.com/api/auth/login\",{email,password});setUser(loginRes.data.user);setToken(loginRes.data.token);localStorage.setItem(\"token\",loginRes.data.token);}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||\"Registration failed\");}};const handleLogin=async e=>{e.preventDefault();if(!email||!password){setError(\"Email and password are required\");return;}try{// ✅ Corrected login endpoint\nconst res=await axios.post(\"https://skillhub-backend-m6he.onrender.com/api/auth/login\",{email,password});setUser(res.data.user);setToken(res.data.token);localStorage.setItem(\"token\",res.data.token);setMessage(\"Login successful\");setError(\"\");}catch(err){var _err$response2,_err$response2$data;setError(((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.message)||\"Login failed\");}};return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:\"400px\",margin:\"50px auto\"},children:[/*#__PURE__*/_jsx(\"h2\",{children:isRegister?\"Register\":\"Login\"}),message&&/*#__PURE__*/_jsx(\"p\",{style:{color:\"green\"},children:message}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:isRegister?handleRegister:handleLogin,children:[isRegister&&/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Name\",value:name,onChange:e=>setName(e.target.value),style:{width:\"100%\",marginBottom:\"10px\",padding:\"8px\"}}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",value:email,onChange:e=>setEmail(e.target.value),style:{width:\"100%\",marginBottom:\"10px\",padding:\"8px\"}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",value:password,onChange:e=>setPassword(e.target.value),style:{width:\"100%\",marginBottom:\"10px\",padding:\"8px\"}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",style:{padding:\"10px 20px\"},children:isRegister?\"Register\":\"Login\"})]}),/*#__PURE__*/_jsxs(\"p\",{style:{marginTop:\"10px\"},children:[isRegister?\"Already have an account?\":\"Don't have an account?\",\" \",/*#__PURE__*/_jsx(\"span\",{style:{color:\"blue\",cursor:\"pointer\"},onClick:()=>{setIsRegister(!isRegister);setMessage(\"\");setError(\"\");},children:isRegister?\"Login here\":\"Register here\"})]})]});}export default AuthPage;","map":{"version":3,"names":["React","useState","axios","jsx","_jsx","jsxs","_jsxs","AuthPage","_ref","setUser","setToken","isRegister","setIsRegister","name","setName","email","setEmail","password","setPassword","message","setMessage","error","setError","handleRegister","e","preventDefault","res","post","data","loginRes","user","token","localStorage","setItem","err","_err$response","_err$response$data","response","handleLogin","_err$response2","_err$response2$data","style","maxWidth","margin","children","color","onSubmit","type","placeholder","value","onChange","target","width","marginBottom","padding","marginTop","cursor","onClick"],"sources":["C:/Users/HP/Desktop/skillhub-frontend/src/components/AuthPage.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\n\nfunction AuthPage({ setUser, setToken }) {\n  const [isRegister, setIsRegister] = useState(false);\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [error, setError] = useState(\"\");\n\n  const handleRegister = async (e) => {\n    e.preventDefault();\n    if (!name || !email || !password) {\n      setError(\"All fields are required\");\n      return;\n    }\n    try {\n      // ✅ Corrected register endpoint\n      const res = await axios.post(\n        \"https://skillhub-backend-m6he.onrender.com/api/auth/register\",\n        { name, email, password }\n      );\n      setMessage(res.data.message);\n      setError(\"\");\n\n      // Auto-login after registration\n      const loginRes = await axios.post(\n        \"https://skillhub-backend-m6he.onrender.com/api/auth/login\",\n        { email, password }\n      );\n      setUser(loginRes.data.user);\n      setToken(loginRes.data.token);\n      localStorage.setItem(\"token\", loginRes.data.token);\n    } catch (err) {\n      setError(err.response?.data?.message || \"Registration failed\");\n    }\n  };\n\n  const handleLogin = async (e) => {\n    e.preventDefault();\n    if (!email || !password) {\n      setError(\"Email and password are required\");\n      return;\n    }\n    try {\n      // ✅ Corrected login endpoint\n      const res = await axios.post(\n        \"https://skillhub-backend-m6he.onrender.com/api/auth/login\",\n        { email, password }\n      );\n      setUser(res.data.user);\n      setToken(res.data.token);\n      localStorage.setItem(\"token\", res.data.token);\n      setMessage(\"Login successful\");\n      setError(\"\");\n    } catch (err) {\n      setError(err.response?.data?.message || \"Login failed\");\n    }\n  };\n\n  return (\n    <div style={{ maxWidth: \"400px\", margin: \"50px auto\" }}>\n      <h2>{isRegister ? \"Register\" : \"Login\"}</h2>\n      {message && <p style={{ color: \"green\" }}>{message}</p>}\n      {error && <p style={{ color: \"red\" }}>{error}</p>}\n\n      <form onSubmit={isRegister ? handleRegister : handleLogin}>\n        {isRegister && (\n          <input\n            type=\"text\"\n            placeholder=\"Name\"\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n            style={{ width: \"100%\", marginBottom: \"10px\", padding: \"8px\" }}\n          />\n        )}\n        <input\n          type=\"email\"\n          placeholder=\"Email\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          style={{ width: \"100%\", marginBottom: \"10px\", padding: \"8px\" }}\n        />\n        <input\n          type=\"password\"\n          placeholder=\"Password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          style={{ width: \"100%\", marginBottom: \"10px\", padding: \"8px\" }}\n        />\n        <button type=\"submit\" style={{ padding: \"10px 20px\" }}>\n          {isRegister ? \"Register\" : \"Login\"}\n        </button>\n      </form>\n\n      <p style={{ marginTop: \"10px\" }}>\n        {isRegister ? \"Already have an account?\" : \"Don't have an account?\"}{\" \"}\n        <span\n          style={{ color: \"blue\", cursor: \"pointer\" }}\n          onClick={() => {\n            setIsRegister(!isRegister);\n            setMessage(\"\");\n            setError(\"\");\n          }}\n        >\n          {isRegister ? \"Login here\" : \"Register here\"}\n        </span>\n      </p>\n    </div>\n  );\n}\n\nexport default AuthPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}