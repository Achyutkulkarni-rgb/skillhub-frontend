{"ast":null,"code":"// src/components/AgentLists.js\nimport React,{useEffect,useState}from\"react\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AgentLists(_ref){let{token}=_ref;const[agentsLists,setAgentsLists]=useState({});const[loading,setLoading]=useState(true);const[error,setError]=useState(\"\");useEffect(()=>{const fetchAgentsAndLists=async()=>{try{// Fetch all agents\nconst agentsRes=await axios.get(\"https://skillhub-backend-m6he.onrender.com/api/agents\",{headers:{Authorization:\"Bearer \".concat(token)}});const agents=agentsRes.data;const tempLists={};// Fetch distributed CSV items for each agent\nfor(const agent of agents){const res=await axios.get(\"https://skillhub-backend-m6he.onrender.com/api/csv/agent/\".concat(agent._id),{headers:{Authorization:\"Bearer \".concat(token)}});tempLists[agent.name]=res.data;// store items by agent name\n}setAgentsLists(tempLists);setLoading(false);}catch(err){var _err$response,_err$response$data;console.error(err);setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||\"Failed to fetch agent lists\");setLoading(false);}};fetchAgentsAndLists();},[token]);if(loading)return/*#__PURE__*/_jsx(\"p\",{style:{textAlign:\"center\"},children:\"Loading...\"});if(error)return/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\",textAlign:\"center\"},children:error});return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:\"900px\",margin:\"20px auto\"},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Distributed Lists for Each Agent\"}),Object.keys(agentsLists).length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No agents or items found.\"}):Object.keys(agentsLists).map(agentName=>/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:\"30px\"},children:[/*#__PURE__*/_jsx(\"h3\",{children:agentName}),agentsLists[agentName].length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No items assigned yet.\"}):/*#__PURE__*/_jsxs(\"table\",{border:\"1\",cellPadding:\"8\",style:{width:\"100%\",borderCollapse:\"collapse\"},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{children:\"First Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Phone\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Notes\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:agentsLists[agentName].map((item,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:item.FirstName}),/*#__PURE__*/_jsx(\"td\",{children:item.Phone}),/*#__PURE__*/_jsx(\"td\",{children:item.Notes})]},index))})]})]},agentName))]});}export default AgentLists;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","AgentLists","_ref","token","agentsLists","setAgentsLists","loading","setLoading","error","setError","fetchAgentsAndLists","agentsRes","get","headers","Authorization","concat","agents","data","tempLists","agent","res","_id","name","err","_err$response","_err$response$data","console","response","message","style","textAlign","children","color","maxWidth","margin","Object","keys","length","map","agentName","marginBottom","border","cellPadding","width","borderCollapse","item","index","FirstName","Phone","Notes"],"sources":["C:/Users/HP/Desktop/skillhub-frontend/src/components/AgentLists.js"],"sourcesContent":["// src/components/AgentLists.js\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\n\nfunction AgentLists({ token }) {\n  const [agentsLists, setAgentsLists] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n\n  useEffect(() => {\n    const fetchAgentsAndLists = async () => {\n      try {\n        // Fetch all agents\n        const agentsRes = await axios.get(\n          \"https://skillhub-backend-m6he.onrender.com/api/agents\",\n          {\n            headers: { Authorization: `Bearer ${token}` },\n          }\n        );\n        const agents = agentsRes.data;\n\n        const tempLists = {};\n\n        // Fetch distributed CSV items for each agent\n        for (const agent of agents) {\n          const res = await axios.get(\n            `https://skillhub-backend-m6he.onrender.com/api/csv/agent/${agent._id}`,\n            {\n              headers: { Authorization: `Bearer ${token}` },\n            }\n          );\n          tempLists[agent.name] = res.data; // store items by agent name\n        }\n\n        setAgentsLists(tempLists);\n        setLoading(false);\n      } catch (err) {\n        console.error(err);\n        setError(err.response?.data?.message || \"Failed to fetch agent lists\");\n        setLoading(false);\n      }\n    };\n\n    fetchAgentsAndLists();\n  }, [token]);\n\n  if (loading) return <p style={{ textAlign: \"center\" }}>Loading...</p>;\n  if (error) return <p style={{ color: \"red\", textAlign: \"center\" }}>{error}</p>;\n\n  return (\n    <div style={{ maxWidth: \"900px\", margin: \"20px auto\" }}>\n      <h2>Distributed Lists for Each Agent</h2>\n      {Object.keys(agentsLists).length === 0 ? (\n        <p>No agents or items found.</p>\n      ) : (\n        Object.keys(agentsLists).map((agentName) => (\n          <div key={agentName} style={{ marginBottom: \"30px\" }}>\n            <h3>{agentName}</h3>\n            {agentsLists[agentName].length === 0 ? (\n              <p>No items assigned yet.</p>\n            ) : (\n              <table\n                border=\"1\"\n                cellPadding=\"8\"\n                style={{ width: \"100%\", borderCollapse: \"collapse\" }}\n              >\n                <thead>\n                  <tr>\n                    <th>#</th>\n                    <th>First Name</th>\n                    <th>Phone</th>\n                    <th>Notes</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {agentsLists[agentName].map((item, index) => (\n                    <tr key={index}>\n                      <td>{index + 1}</td>\n                      <td>{item.FirstName}</td>\n                      <td>{item.Phone}</td>\n                      <td>{item.Notes}</td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            )}\n          </div>\n        ))\n      )}\n    </div>\n  );\n}\n\nexport default AgentLists;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}